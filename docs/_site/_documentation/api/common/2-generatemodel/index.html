<h2 id="description">Description</h2>

<p>generateModel() is a function used to train Machine Learning models to predict the
phases of molecules based on the input systems. The models will be saved in a file unless told otherwise,
and will also output the models in a variable that can be used directly.</p>

<h2 id="argument-keywords-and-outputs">Argument, keywords and outputs</h2>

<h3 id="inputs--arguments">Input(s) / Argument(s)</h3>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Flag</th>
      <th> Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Systems</td>
      <td> </td>
      <td> list of classes System</td>
      <td>List of each instances of the System class that should be used for the training. Systems can be generated using the function openSystem(). Provide one system only per state. The types, number of molecules and neighbor ranking should be the same in each system. By default, the first system of the list should be the gel one, and the second one the fluid one. </td>
    </tr>
    <tr>
      <td>States</td>
      <td>states=</td>
      <td>list of str</td>
      <td>(Opt.) Names of the state of each system submitted above. The order should be the same. Default is gel/fluid.</td>
    </tr>
    <tr>
      <td>File Path</td>
      <td>file_path=</td>
      <td>str</td>
      <td>(Opt.) Path and name of the file to generate. File extension should be .lpm. By default, the name is autogenerated as “date_moltype.lpm” (e.g. 20201201_DPPC.lpm)</td>
    </tr>
    <tr>
      <td>Validation size</td>
      <td>validationSize=</td>
      <td>float</td>
      <td>(Opt.) Proportion of molecules from the systems kept aside for the validation set. Default is 0.20 (20%)</td>
    </tr>
    <tr>
      <td> Seed</td>
      <td> seed=</td>
      <td>int</td>
      <td>(Opt.) Seed for random shuffle of the input systems. Default is 7.</td>
    </tr>
    <tr>
      <td>Number of splits</td>
      <td>nSplits=</td>
      <td>int</td>
      <td>(Opt.) Number of time the training should be repeated on the training set with random shuffling. Default is 10.</td>
    </tr>
    <tr>
      <td> Scoring</td>
      <td> scoring=</td>
      <td>str</td>
      <td>(Opt.) Type of methode used for making the scores. Value should be taken from scikit-learn available inputs. Default is accuracy.</td>
    </tr>
    <tr>
      <td>Save Model</td>
      <td>save_model=</td>
      <td>bool</td>
      <td>(Opt.) Save the model in a file. Default is True.</td>
    </tr>
  </tbody>
</table>

<h3 id="outputs">Output(s)</h3>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th> Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Models</td>
      <td>dict of models</td>
      <td>Scikit-learn models trained on the input systems for molecule classification.</td>
    </tr>
  </tbody>
</table>

<h2 id="examples">Examples</h2>

<h3 id="generate-automatically-a-model-file-on-2-phases">Generate automatically a model file on 2 phases</h3>

<p>The following example will use two instances of the System class, named <em>system_A</em> and <em>system_B</em>, to
train the Machine Learning algorithms to recognise phases named <em>A</em> and <em>B</em>. The model file will
automatically be named and saved in the current folder.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">mllpa</span>

<span class="n">mllpa</span><span class="p">.</span><span class="n">generateModel</span><span class="p">([</span><span class="n">system_A</span><span class="p">,</span> <span class="n">system_B</span><span class="p">],</span> <span class="n">states</span><span class="o">=</span><span class="p">[</span><span class="s">'A'</span><span class="p">,</span> <span class="s">'B'</span><span class="p">])</span>
</code></pre></div></div>

<h3 id="generate-automatically-a-model-file-on-3-phases-with-a-chosen-name">Generate automatically a model file on 3 phases with a chosen name</h3>

<p>The following example will use three instances of the System class, named <em>system_A</em>,  <em>system_B</em> and <em>system_C</em>, to
train the Machine Learning algorithms to recognise phases named <em>A</em>, <em>B</em> amd <em>C</em>. The model file
named <em>new_model.lpm</em> will be saved in the current folder.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">mllpa</span><span class="p">.</span><span class="n">generateModel</span><span class="p">([</span><span class="n">system_A</span><span class="p">,</span> <span class="n">system_B</span><span class="p">,</span> <span class="n">system_C</span><span class="p">],</span> <span class="n">states</span><span class="o">=</span><span class="p">[</span><span class="s">'A'</span><span class="p">,</span> <span class="s">'B'</span><span class="p">,</span> <span class="s">'C'</span><span class="p">],</span> <span class="n">file_path</span><span class="o">=</span> <span class="s">'new_model.lpm'</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="modify-the-training-and-scoring-methods">Modify the training and scoring methods</h3>

<p>The following example will use two instances of the System class, named <em>system_A</em> and <em>system_B</em>, to
train the Machine Learning algorithms to recognise phases automatically named respectively <em>gel</em> and <em>fluid</em>.
The training will be done with a <em>validation size</em> of 33%, <em>repeated</em> 100 times and start with a <em>random seed generator</em> equals to 10.
The model file will automatically be named and saved in the current folder.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">mllpa</span><span class="p">.</span><span class="n">generateModel</span><span class="p">([</span><span class="n">system_A</span><span class="p">,</span> <span class="n">system_B</span><span class="p">],</span> <span class="n">validationSize</span><span class="o">=</span><span class="mf">0.33</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">nSplits</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="save-in-variables-but-not-in-a-file">Save in variables but not in a file</h3>

<p>The following example will use two instances of the System class, named <em>system_A</em> and <em>system_B</em>, to
train the Machine Learning algorithms to recognise phases automatically named respectively <em>gel</em> and <em>fluid</em>.
No model file will be saved and the models will instead be returned in the <em>models</em> variable.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">models</span> <span class="o">=</span> <span class="n">mllpa</span><span class="p">.</span><span class="n">generateModel</span><span class="p">([</span><span class="n">system_A</span><span class="p">,</span> <span class="n">system_B</span><span class="p">],</span> <span class="n">save_model</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="save-in-variables-and-in-a-file">Save in variables and in a file</h3>

<p>The following example will use two instances of the System class, named <em>system_A</em> and <em>system_B</em>, to
train the Machine Learning algorithms to recognise phases automatically named respectively <em>gel</em> and <em>fluid</em>.
The model file will automatically be named and saved in the current folder, and the models will instead be returned in the <em>models</em> variable.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">models</span> <span class="o">=</span> <span class="n">mllpa</span><span class="p">.</span><span class="n">generateModel</span><span class="p">([</span><span class="n">system_A</span><span class="p">,</span> <span class="n">system_B</span><span class="p">])</span>
</code></pre></div></div>

<h2 id="related-tutorials">Related tutorials</h2>

<p>The following tutorial(s) detail further the use of the <em>generateModel()</em> function:</p>

<ul>
  <li>
    <p><a href="/mllpa/documentation/tutorials/phase-prediction/1-training/">Machine Learning algorithms training</a></p>
  </li>
  <li>
    <p><a href="/documentation/tutorials/phase-prediction/2-rank-optimisation/">Optimisation of the neighbour rank</a></p>
  </li>
</ul>
