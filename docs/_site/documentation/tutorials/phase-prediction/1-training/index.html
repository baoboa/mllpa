<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.20.2 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Machine Learning algorithms training - ML-LPA</title>
<meta name="description" content="Once the simulation files have been extracted and their information stored in instances of the System class, ML-LPA is ready to be trained to identify the lipid phases.  Requirements for the systems  ML-LPA can be trained to predict multiple phases at the same time (# phases &gt;= 2). For each of the phases being trained on, one instance of the System class is required.  Furthermore, to avoid issues and bias brought by over-representation of one phase as compared to the other, several requirements have to be met:          The molecule type should be the same in all instances.           The number of atoms per molecule should be the same in all instances.           The neighbour rank, and therefore the number of distances per molecule, should be the same in all instances.      The neighbour rank can be edited anytime using the System class method .getDistances(). Please read the   corresponding section for more details.           The total number of molecules should be large enough to train on a significant population. We recommend to use at least 500 molecules per instances for the training.      If the instances does not have enough molecules per frame, ML-LPA should be trained on more than one frame.   For example, if the instaces have 50 molecules, the training should be done on 10 frames at least.      The number of frames can only be selected while loading the molecules from the simulation files with the   openSystem() function. For more details, see the API.           The total number of molecules being used for the training should be the same in all instances.      If the instances have different number of molecules per frame, the number of frames used for the training   should be adjusted so # frames x # molecules per frame is constant. For example, if the instance A   has 30 molecules and the instance B 90 molecules, the instance A should be trained on 3 times more frames   than B.      Train the models  ML-LPA relies on a 2-steps prediction system involving a total of 4 different ML algorithms defined in scikit-learn. More detailed information on the prediction system and the ML algorithms used can be found in a later tutorial.  Generate the model files  Once all the requirements have been met, ML-LPA is ready to be trained. This is done using the function generateModel(). The inputs of the function are two lists: (1) one list containing all the systems with the different phases to be trained on, and (2) one list with their respective labels.  import mllpa  # We import one set of simulation files per phase gel_system = mllpa.openSystem(&#39;gel.gro&#39;, &#39;gel.tpr&#39;, &#39;DPPC&#39;) fluid_system = mllpa.openSystem(&#39;fluid.gro&#39;, &#39;fluid.tpr&#39;, &#39;DPPC&#39;)  # Train the models and saved them in a file mllpa.generateModel([gel_system, fluid_system], states=[&#39;gel&#39;, &#39;fluid&#39;], file_path=&#39;new_model.lpm&#39;)   In this example, the coordinates and structure files of the gel and fluid phases are respectively called gel.gro and gel.tpr, and fluid.gro and fluid.tpr. We use the openSystem() function to load the information from the simulation files. Check the related tutorial for more details.  Once the training has been completed, the models are stored in a .lpm (Lipid Phase Model) file at the given location. This file can be used anytime to predict the phases in a simulation of unknown composition. More details on the .lpm files are given in the corresponding tutorial.  Extract directly the models in variables  For many reasons, one can decide to not save the models in a file, and just extract them directly in variables to use them straight. This can be done by disabling the save_model= keyword-argument:  models = mllpa.generateModel([gel_system, fluid_system], states=[&#39;gel&#39;, &#39;fluid&#39;], save_model=False)   The models are returned in a dictionary of instances of specific scikit-learn classes.  You can find the description of all the keyword-arguments of the generateModel() function in the API.  Assessing reproducibility and scoring  One issue that can arise while training ML models with a set of data is that the size of the dataset will never be large enough to correspond exactly to all the population of possible configurations for each phase. As a consequence, we are bound to train our models on a sample that we hope large enough to prevent any training bias.  In order to check whether the sample of N molecules is a good enough representation of the population, ML-LPA will proceed by resampling the input data and generate K times 3 different sub-samples of respective sizes j N, j N and (1-j) N, where K and j can be set by the user, and j a float between 0 and 0.33.   Flowchart of the logic used to train the ML models   The sample of size (1-j)N and one of the samples of size jN will be used to train the 2-steps prediction system, while the other sample of size jN is used to assess the accuracy of the system and of each algorithm. The final score and reproducibility are calculated from the K repetitions of the resampling and training.  What is next?          Now that you know how to generate a model in ML-LPA, the next obvious step would be to use it to predict the phases in an unknown system.           You can also check how to read the scores in the .lpm files or optimise the neighbour rank.      Check the API  The following elements have been used in this tutorial:     generateModel">


  <meta name="author" content="Vivien WALTER, PhD">
  
  <meta property="article:author" content="Vivien WALTER, PhD">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_GB">
<meta property="og:site_name" content="ML-LPA">
<meta property="og:title" content="Machine Learning algorithms training">
<meta property="og:url" content="http://localhost:4000/mllpa/documentation/tutorials/phase-prediction/1-training/">


  <meta property="og:description" content="Once the simulation files have been extracted and their information stored in instances of the System class, ML-LPA is ready to be trained to identify the lipid phases.  Requirements for the systems  ML-LPA can be trained to predict multiple phases at the same time (# phases &gt;= 2). For each of the phases being trained on, one instance of the System class is required.  Furthermore, to avoid issues and bias brought by over-representation of one phase as compared to the other, several requirements have to be met:          The molecule type should be the same in all instances.           The number of atoms per molecule should be the same in all instances.           The neighbour rank, and therefore the number of distances per molecule, should be the same in all instances.      The neighbour rank can be edited anytime using the System class method .getDistances(). Please read the   corresponding section for more details.           The total number of molecules should be large enough to train on a significant population. We recommend to use at least 500 molecules per instances for the training.      If the instances does not have enough molecules per frame, ML-LPA should be trained on more than one frame.   For example, if the instaces have 50 molecules, the training should be done on 10 frames at least.      The number of frames can only be selected while loading the molecules from the simulation files with the   openSystem() function. For more details, see the API.           The total number of molecules being used for the training should be the same in all instances.      If the instances have different number of molecules per frame, the number of frames used for the training   should be adjusted so # frames x # molecules per frame is constant. For example, if the instance A   has 30 molecules and the instance B 90 molecules, the instance A should be trained on 3 times more frames   than B.      Train the models  ML-LPA relies on a 2-steps prediction system involving a total of 4 different ML algorithms defined in scikit-learn. More detailed information on the prediction system and the ML algorithms used can be found in a later tutorial.  Generate the model files  Once all the requirements have been met, ML-LPA is ready to be trained. This is done using the function generateModel(). The inputs of the function are two lists: (1) one list containing all the systems with the different phases to be trained on, and (2) one list with their respective labels.  import mllpa  # We import one set of simulation files per phase gel_system = mllpa.openSystem(&#39;gel.gro&#39;, &#39;gel.tpr&#39;, &#39;DPPC&#39;) fluid_system = mllpa.openSystem(&#39;fluid.gro&#39;, &#39;fluid.tpr&#39;, &#39;DPPC&#39;)  # Train the models and saved them in a file mllpa.generateModel([gel_system, fluid_system], states=[&#39;gel&#39;, &#39;fluid&#39;], file_path=&#39;new_model.lpm&#39;)   In this example, the coordinates and structure files of the gel and fluid phases are respectively called gel.gro and gel.tpr, and fluid.gro and fluid.tpr. We use the openSystem() function to load the information from the simulation files. Check the related tutorial for more details.  Once the training has been completed, the models are stored in a .lpm (Lipid Phase Model) file at the given location. This file can be used anytime to predict the phases in a simulation of unknown composition. More details on the .lpm files are given in the corresponding tutorial.  Extract directly the models in variables  For many reasons, one can decide to not save the models in a file, and just extract them directly in variables to use them straight. This can be done by disabling the save_model= keyword-argument:  models = mllpa.generateModel([gel_system, fluid_system], states=[&#39;gel&#39;, &#39;fluid&#39;], save_model=False)   The models are returned in a dictionary of instances of specific scikit-learn classes.  You can find the description of all the keyword-arguments of the generateModel() function in the API.  Assessing reproducibility and scoring  One issue that can arise while training ML models with a set of data is that the size of the dataset will never be large enough to correspond exactly to all the population of possible configurations for each phase. As a consequence, we are bound to train our models on a sample that we hope large enough to prevent any training bias.  In order to check whether the sample of N molecules is a good enough representation of the population, ML-LPA will proceed by resampling the input data and generate K times 3 different sub-samples of respective sizes j N, j N and (1-j) N, where K and j can be set by the user, and j a float between 0 and 0.33.   Flowchart of the logic used to train the ML models   The sample of size (1-j)N and one of the samples of size jN will be used to train the 2-steps prediction system, while the other sample of size jN is used to assess the accuracy of the system and of each algorithm. The final score and reproducibility are calculated from the K repetitions of the resampling and training.  What is next?          Now that you know how to generate a model in ML-LPA, the next obvious step would be to use it to predict the phases in an unknown system.           You can also check how to read the scores in the .lpm files or optimise the neighbour rank.      Check the API  The following elements have been used in this tutorial:     generateModel">





  <meta name="twitter:site" content="@vwalter_rnk">
  <meta name="twitter:title" content="Machine Learning algorithms training">
  <meta name="twitter:description" content="Once the simulation files have been extracted and their information stored in instances of the System class, ML-LPA is ready to be trained to identify the lipid phases.  Requirements for the systems  ML-LPA can be trained to predict multiple phases at the same time (# phases &gt;= 2). For each of the phases being trained on, one instance of the System class is required.  Furthermore, to avoid issues and bias brought by over-representation of one phase as compared to the other, several requirements have to be met:          The molecule type should be the same in all instances.           The number of atoms per molecule should be the same in all instances.           The neighbour rank, and therefore the number of distances per molecule, should be the same in all instances.      The neighbour rank can be edited anytime using the System class method .getDistances(). Please read the   corresponding section for more details.           The total number of molecules should be large enough to train on a significant population. We recommend to use at least 500 molecules per instances for the training.      If the instances does not have enough molecules per frame, ML-LPA should be trained on more than one frame.   For example, if the instaces have 50 molecules, the training should be done on 10 frames at least.      The number of frames can only be selected while loading the molecules from the simulation files with the   openSystem() function. For more details, see the API.           The total number of molecules being used for the training should be the same in all instances.      If the instances have different number of molecules per frame, the number of frames used for the training   should be adjusted so # frames x # molecules per frame is constant. For example, if the instance A   has 30 molecules and the instance B 90 molecules, the instance A should be trained on 3 times more frames   than B.      Train the models  ML-LPA relies on a 2-steps prediction system involving a total of 4 different ML algorithms defined in scikit-learn. More detailed information on the prediction system and the ML algorithms used can be found in a later tutorial.  Generate the model files  Once all the requirements have been met, ML-LPA is ready to be trained. This is done using the function generateModel(). The inputs of the function are two lists: (1) one list containing all the systems with the different phases to be trained on, and (2) one list with their respective labels.  import mllpa  # We import one set of simulation files per phase gel_system = mllpa.openSystem(&#39;gel.gro&#39;, &#39;gel.tpr&#39;, &#39;DPPC&#39;) fluid_system = mllpa.openSystem(&#39;fluid.gro&#39;, &#39;fluid.tpr&#39;, &#39;DPPC&#39;)  # Train the models and saved them in a file mllpa.generateModel([gel_system, fluid_system], states=[&#39;gel&#39;, &#39;fluid&#39;], file_path=&#39;new_model.lpm&#39;)   In this example, the coordinates and structure files of the gel and fluid phases are respectively called gel.gro and gel.tpr, and fluid.gro and fluid.tpr. We use the openSystem() function to load the information from the simulation files. Check the related tutorial for more details.  Once the training has been completed, the models are stored in a .lpm (Lipid Phase Model) file at the given location. This file can be used anytime to predict the phases in a simulation of unknown composition. More details on the .lpm files are given in the corresponding tutorial.  Extract directly the models in variables  For many reasons, one can decide to not save the models in a file, and just extract them directly in variables to use them straight. This can be done by disabling the save_model= keyword-argument:  models = mllpa.generateModel([gel_system, fluid_system], states=[&#39;gel&#39;, &#39;fluid&#39;], save_model=False)   The models are returned in a dictionary of instances of specific scikit-learn classes.  You can find the description of all the keyword-arguments of the generateModel() function in the API.  Assessing reproducibility and scoring  One issue that can arise while training ML models with a set of data is that the size of the dataset will never be large enough to correspond exactly to all the population of possible configurations for each phase. As a consequence, we are bound to train our models on a sample that we hope large enough to prevent any training bias.  In order to check whether the sample of N molecules is a good enough representation of the population, ML-LPA will proceed by resampling the input data and generate K times 3 different sub-samples of respective sizes j N, j N and (1-j) N, where K and j can be set by the user, and j a float between 0 and 0.33.   Flowchart of the logic used to train the ML models   The sample of size (1-j)N and one of the samples of size jN will be used to train the 2-steps prediction system, while the other sample of size jN is used to assess the accuracy of the system and of each algorithm. The final score and reproducibility are calculated from the K repetitions of the resampling and training.  What is next?          Now that you know how to generate a model in ML-LPA, the next obvious step would be to use it to predict the phases in an unknown system.           You can also check how to read the scores in the .lpm files or optimise the neighbour rank.      Check the API  The following elements have been used in this tutorial:     generateModel">
  <meta name="twitter:url" content="http://localhost:4000/mllpa/documentation/tutorials/phase-prediction/1-training/">

  
    <meta name="twitter:card" content="summary">
    
  

  



  <meta property="article:published_time" content="2020-09-20T12:26:40+01:00">





  

  


<link rel="canonical" href="http://localhost:4000/mllpa/documentation/tutorials/phase-prediction/1-training/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "ML-LPA",
      "url": "http://localhost:4000/mllpa/"
    
  }
</script>






<!-- end _includes/seo.html -->


<link href="/mllpa/feed.xml" type="application/atom+xml" rel="alternate" title="ML-LPA Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/mllpa/assets/css/main.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css">

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<link rel="apple-touch-icon" sizes="180x180" href="/mllpa/assets/images/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/mllpa/assets/images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/mllpa/assets/images/favicon-16x16.png">
<link rel="manifest" href="/mllpa/assets/images/site.webmanifest">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/mllpa/"><img src="/mllpa/assets/images/logo.png" alt=""></a>
        
        <a class="site-title" href="/mllpa/">
          ML-LPA
          <span class="site-subtitle">Machine-Learning assisted Lipid Phase Analysis</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/mllpa/install/">Installation</a>
            </li><li class="masthead__menu-item">
              <a href="/mllpa/documentation/">Documentation</a>
            </li><li class="masthead__menu-item">
              <a href="/mllpa/about-mllpa/">About ML-LPA</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  
  
    
      
      
      
      
    
    
      

<nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">Toggle menu</label>
  <ul class="nav__items">
    
      <li>
        
          <a href="/mllpa/documentation/tutorials/quick-and-dirty/"><span class="nav__sub-title">Quick & Dirty tutorial</span></a>
        

        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Loading simulation</span>
        

        
        <ul>
          
            <li><a href="/mllpa/documentation/tutorials/loading-files/1-simulation-files/">Load from simulation files</a></li>
          
            <li><a href="/mllpa/documentation/tutorials/loading-files/2-positions/">Load from position array</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">The System class</span>
        

        
        <ul>
          
            <li><a href="/mllpa/documentation/tutorials/system-class/1-description/">Attributes of the System class</a></li>
          
            <li><a href="/mllpa/documentation/tutorials/system-class/2-methods/">Methods of the System class</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Predicting phases</span>
        

        
        <ul>
          
            <li><a href="/mllpa/documentation/tutorials/phase-prediction/1-training/" class="active">Machine Learning algorithms training</a></li>
          
            <li><a href="/mllpa/documentation/tutorials/phase-prediction/2-rank-optimisation/">Optimisation of the neighbour rank</a></li>
          
            <li><a href="/mllpa/documentation/tutorials/phase-prediction/3-ml-prediction/">Lipid phase prediction</a></li>
          
            <li><a href="/mllpa/documentation/tutorials/phase-prediction/4-set-phases/">Setting phases manually</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Local environment analysis</span>
        

        
        <ul>
          
            <li><a href="/mllpa/documentation/tutorials/tessellations/1-voronoi/">Voronoi tessellations</a></li>
          
            <li><a href="/mllpa/documentation/tutorials/tessellations/2-local-environment/">Map the environment</a></li>
          
            <li><a href="/mllpa/documentation/tutorials/tessellations/3-no-phases/">Analysis without phases</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Save the outputs</span>
        

        
        <ul>
          
            <li><a href="/mllpa/documentation/tutorials/outputs/1-model-file/">The .lpm model file</a></li>
          
            <li><a href="/mllpa/documentation/tutorials/outputs/2-save-system/">Save the System class</a></li>
          
            <li><a href="/mllpa/documentation/tutorials/outputs/3-save-voronoi/">Save the Tessellation class</a></li>
          
        </ul>
        
      </li>
    
  </ul>
</nav>

    
  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Machine Learning algorithms training">
    <meta itemprop="description" content="Once the simulation files have been extracted and their information stored in instances of the System class,ML-LPA is ready to be trained to identify the lipid phases.Requirements for the systemsML-LPA can be trained to predict multiple phases at the same time (# phases &gt;= 2). For each of the phasesbeing trained on, one instance of the System class is required.Furthermore, to avoid issues and bias brought by over-representation of one phase as compared to the other, severalrequirements have to be met:      The molecule type should be the same in all instances.        The number of atoms per molecule should be the same in all instances.        The neighbour rank, and therefore the number of distances per molecule, should be the same in all instances.    The neighbour rank can be edited anytime using the System class method .getDistances(). Please read the  corresponding section for more details.        The total number of molecules should be large enough to train on a significant population. We recommend to useat least 500 molecules per instances for the training.    If the instances does not have enough molecules per frame, ML-LPA should be trained on more than one frame.  For example, if the instaces have 50 molecules, the training should be done on 10 frames at least.    The number of frames can only be selected while loading the molecules from the simulation files with the  openSystem() function. For more details, see the API.        The total number of molecules being used for the training should be the same in all instances.    If the instances have different number of molecules per frame, the number of frames used for the training  should be adjusted so # frames x # molecules per frame is constant. For example, if the instance A  has 30 molecules and the instance B 90 molecules, the instance A should be trained on 3 times more frames  than B.  Train the modelsML-LPA relies on a 2-steps prediction system involving a total of 4 different ML algorithms definedin scikit-learn. More detailed information on the prediction system and the ML algorithms used can be foundin a later tutorial.Generate the model filesOnce all the requirements have been met, ML-LPA is ready to be trained. This is done using the functiongenerateModel(). The inputs of the function are two lists: (1) one list containing all the systems with the different phasesto be trained on, and (2) one list with their respective labels.import mllpa# We import one set of simulation files per phasegel_system = mllpa.openSystem(&#39;gel.gro&#39;, &#39;gel.tpr&#39;, &#39;DPPC&#39;)fluid_system = mllpa.openSystem(&#39;fluid.gro&#39;, &#39;fluid.tpr&#39;, &#39;DPPC&#39;)# Train the models and saved them in a filemllpa.generateModel([gel_system, fluid_system], states=[&#39;gel&#39;, &#39;fluid&#39;], file_path=&#39;new_model.lpm&#39;)In this example, the coordinates and structure files of the gel and fluid phasesare respectively called gel.gro and gel.tpr, and fluid.gro and fluid.tpr.We use the openSystem() function to load the information fromthe simulation files. Check the related tutorial for more details.Once the training has been completed, the models are stored in a .lpm (Lipid Phase Model) file at the given location.This file can be used anytime to predict the phases in a simulation of unknown composition. More details on the.lpm files are given in the corresponding tutorial.Extract directly the models in variablesFor many reasons, one can decide to not save the models in a file, and just extract them directly in variables to use themstraight. This can be done by disabling the save_model= keyword-argument:models = mllpa.generateModel([gel_system, fluid_system], states=[&#39;gel&#39;, &#39;fluid&#39;], save_model=False)The models are returned in a dictionary of instances of specific scikit-learn classes.You can find the description of all the keyword-arguments of the generateModel() function in the API.Assessing reproducibility and scoringOne issue that can arise while training ML models with a set of data is that the size of the dataset willnever be large enough to correspond exactly to all the population of possible configurations for each phase.As a consequence, we are bound to train our models on a sample that we hope large enough to prevent any training bias.In order to check whether the sample of N molecules is a good enough representation of the population, ML-LPA will proceedby resampling the input data and generate K times 3 different sub-samples of respective sizes j N, j N and (1-j) N,where K and j can be set by the user, and j a float between 0 and 0.33.Flowchart of the logic used to train the ML modelsThe sample of size (1-j)N and one of the samples of size jN will be used to train the 2-steps prediction system, while theother sample of size jN is used to assess the accuracy of the system and of each algorithm. The final score and reproducibility arecalculated from the K repetitions of the resampling and training.What is next?      Now that you know how to generate a model in ML-LPA, the next obvious step would be touse it to predict the phases in an unknown system.        You can also check how to read the scores in the .lpm filesor optimise the neighbour rank.  Check the APIThe following elements have been used in this tutorial:  generateModel">
    
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Machine Learning algorithms training
</h1>
          


        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right sticky">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> On this page</h4></header>
              <ul class="toc__menu">
  <li><a href="#requirements-for-the-systems">Requirements for the systems</a></li>
  <li><a href="#train-the-models">Train the models</a>
    <ul>
      <li><a href="#generate-the-model-files">Generate the model files</a></li>
      <li><a href="#extract-directly-the-models-in-variables">Extract directly the models in variables</a></li>
    </ul>
  </li>
  <li><a href="#assessing-reproducibility-and-scoring">Assessing reproducibility and scoring</a></li>
  <li><a href="#what-is-next">What is next?</a></li>
  <li><a href="#check-the-api">Check the API</a></li>
</ul>

            </nav>
          </aside>
        
        <p>Once the simulation files have been extracted and their information stored in <strong>instances of the System class</strong>,
ML-LPA is ready to be trained to identify the lipid phases.</p>

<h2 id="requirements-for-the-systems">Requirements for the systems</h2>

<p>ML-LPA can be trained to predict <strong>multiple phases</strong> at the same time (# phases &gt;= 2). For each of the phases
being trained on, one instance of the System class is required.</p>

<p>Furthermore, to avoid issues and bias brought by <strong>over-representation of one phase</strong> as compared to the other, several
requirements have to be met:</p>

<ul>
  <li>
    <p>The <strong>molecule type should be the same</strong> in all instances.</p>
  </li>
  <li>
    <p>The <strong>number of atoms per molecule should be the same</strong> in all instances.</p>
  </li>
  <li>
    <p>The <strong>neighbour rank</strong>, and therefore the <strong>number of distances per molecule</strong>, <strong>should be the same</strong> in all instances.</p>

    <p class="notice--info">The neighbour rank can be edited anytime using the System class method <em>.getDistances()</em>. Please read the
  <a href="/mllpa/documentation/tutorials/system-class/2-methods/#intra-molecular-atomic-distances">corresponding section</a> for more details.</p>
  </li>
  <li>
    <p>The <strong>total number of molecules should be large enough</strong> to train on a significant population. We recommend to use
at least 500 molecules per instances for the training.</p>

    <p class="notice--info">If the instances does not have enough molecules per frame, ML-LPA should be trained on more than one frame.
  For example, if the instaces have 50 molecules, the training should be done on 10 frames at least.</p>

    <p class="notice--info">The number of frames can only be selected while loading the molecules from the simulation files with the
  <em>openSystem()</em> function. For more details, see the <a href="">API</a>.</p>
  </li>
  <li>
    <p>The total number of molecules being used for the training <strong>should be the same in all instances</strong>.</p>

    <p class="notice--info">If the instances have different number of molecules per frame, the number of frames used for the training
  should be adjusted so <code class="language-plaintext highlighter-rouge"># frames x # molecules per frame</code> is constant. For example, if the instance A
  has 30 molecules and the instance B 90 molecules, the instance A should be trained on 3 times more frames
  than B.</p>
  </li>
</ul>

<h2 id="train-the-models">Train the models</h2>

<p>ML-LPA relies on a <strong>2-steps</strong> prediction system involving a total of <strong>4 different ML algorithms</strong> defined
in scikit-learn. More detailed information on the prediction system and the ML algorithms used can be found
in a <a href="/mllpa/documentation/tutorials/phase-prediction/4-ml-prediction/">later tutorial</a>.</p>

<h3 id="generate-the-model-files">Generate the model files</h3>

<p>Once all the requirements have been met, ML-LPA is ready to be trained. This is done using the function
<em>generateModel()</em>. The inputs of the function are two lists: (1) one list containing all <strong>the systems with the different phases</strong>
to be trained on, and (2) one list with their <strong>respective labels</strong>.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">mllpa</span>

<span class="c1"># We import one set of simulation files per phase
</span><span class="n">gel_system</span> <span class="o">=</span> <span class="n">mllpa</span><span class="p">.</span><span class="n">openSystem</span><span class="p">(</span><span class="s">'gel.gro'</span><span class="p">,</span> <span class="s">'gel.tpr'</span><span class="p">,</span> <span class="s">'DPPC'</span><span class="p">)</span>
<span class="n">fluid_system</span> <span class="o">=</span> <span class="n">mllpa</span><span class="p">.</span><span class="n">openSystem</span><span class="p">(</span><span class="s">'fluid.gro'</span><span class="p">,</span> <span class="s">'fluid.tpr'</span><span class="p">,</span> <span class="s">'DPPC'</span><span class="p">)</span>

<span class="c1"># Train the models and saved them in a file
</span><span class="n">mllpa</span><span class="p">.</span><span class="n">generateModel</span><span class="p">([</span><span class="n">gel_system</span><span class="p">,</span> <span class="n">fluid_system</span><span class="p">],</span> <span class="n">states</span><span class="o">=</span><span class="p">[</span><span class="s">'gel'</span><span class="p">,</span> <span class="s">'fluid'</span><span class="p">],</span> <span class="n">file_path</span><span class="o">=</span><span class="s">'new_model.lpm'</span><span class="p">)</span>
</code></pre></div></div>

<p class="notice--info">In this example, the coordinates and structure files of the gel and fluid phases
are respectively called <em>gel.gro</em> and <em>gel.tpr</em>, and <em>fluid.gro</em> and <em>fluid.tpr</em>.
We use the <em>openSystem()</em> function to load the information from
the simulation files. Check the <a href="/mllpa/documentation/tutorials/loading-files/1-simulation-files/">related tutorial</a> for more details.</p>

<p>Once the training has been completed, the models are stored in a <strong>.lpm</strong> (<ins>L</ins>ipid <ins>P</ins>hase <ins>M</ins>odel) file at the given location.
This file can be used anytime to predict the phases in a simulation of unknown composition. More details on the
.lpm files are given in the <a href="/mllpa/documentation/tutorials/phase-prediction/2-model-file/">corresponding tutorial</a>.</p>

<h3 id="extract-directly-the-models-in-variables">Extract directly the models in variables</h3>

<p>For many reasons, one can decide to <strong>not save the models in a file</strong>, and just extract them directly in variables to use them
straight. This can be done by disabling the <em>save_model=</em> keyword-argument:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">models</span> <span class="o">=</span> <span class="n">mllpa</span><span class="p">.</span><span class="n">generateModel</span><span class="p">([</span><span class="n">gel_system</span><span class="p">,</span> <span class="n">fluid_system</span><span class="p">],</span> <span class="n">states</span><span class="o">=</span><span class="p">[</span><span class="s">'gel'</span><span class="p">,</span> <span class="s">'fluid'</span><span class="p">],</span> <span class="n">save_model</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</code></pre></div></div>

<p>The models are returned in a dictionary of instances of <strong>specific scikit-learn classes</strong>.</p>

<p>You can find the description of all the keyword-arguments of the <em>generateModel()</em> function in the <a href="">API</a>.</p>

<h2 id="assessing-reproducibility-and-scoring">Assessing reproducibility and scoring</h2>

<p>One issue that can arise while training ML models with a set of data is that the size of the dataset will
<strong>never be large enough</strong> to correspond exactly to all the <strong>population of possible configurations</strong> for each phase.
As a consequence, we are bound to train our models on a <strong>sample</strong> that we hope large enough to prevent any training bias.</p>

<p>In order to check whether the sample of <strong>N molecules</strong> is a <em>good enough representation</em> of the population, ML-LPA will proceed
by <strong>resampling</strong> the input data and generate <strong>K times</strong> 3 different sub-samples of respective sizes <strong>j N</strong>, <strong>j N</strong> and <strong>(1-j) N</strong>,
where <strong>K</strong> and <strong>j</strong> can be set by the user, and <strong>j</strong> a float between 0 and 0.33.</p>

<center><img src="/mllpa/assets/images/tutorials/training.png" width="500" height="500" /></center>
<center><sub>Flowchart of the logic used to train the ML models</sub></center>
<p><br /></p>

<p>The sample of size (1-j)N and one of the samples of size jN will be used to train the 2-steps prediction system, while the
other sample of size jN is used to assess the accuracy of the system and of each algorithm. The final score and reproducibility are
calculated from the <strong>K repetitions of the resampling and training</strong>.</p>

<h2 id="what-is-next">What is next?</h2>

<ul>
  <li>
    <p>Now that you know how to generate a model in ML-LPA, the next obvious step would be to
use it to <a href="">predict the phases</a> in an unknown system.</p>
  </li>
  <li>
    <p>You can also check how to <a href="/mllpa/documentation/tutorials/phase-prediction/2-model-file/">read the scores in the .lpm files</a>
or <a href="/mllpa/documentation/tutorials/phase-prediction/3-rank-optimisation/">optimise the neighbour rank</a>.</p>
  </li>
</ul>

<h2 id="check-the-api">Check the API</h2>

<p>The following elements have been used in this tutorial:</p>

<ul>
  <li>generateModel</li>
</ul>

        
      </section>

      <footer class="page__meta">
        
        
  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/mllpa/tags/#machine-learning" class="page__taxonomy-item" rel="tag">machine learning</a><span class="sep">, </span>
    
      
      
      <a href="/mllpa/tags/#system" class="page__taxonomy-item" rel="tag">system</a><span class="sep">, </span>
    
      
      
      <a href="/mllpa/tags/#training" class="page__taxonomy-item" rel="tag">training</a>
    
    </span>
  </p>




  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/mllpa/categories/#tutorial" class="page__taxonomy-item" rel="tag">tutorial</a>
    
    </span>
  </p>


        

      </footer>

      

      
  <nav class="pagination">
    
      <a href="/mllpa/documentation/tutorials/outputs/3-save-voronoi/" class="pagination--pager" title="Save the Tessellation class
">Previous</a>
    
    
      <a href="/mllpa/documentation/tutorials/phase-prediction/2-rank-optimisation/" class="pagination--pager" title="Optimisation of the neighbour rank
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
</div>

    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <!--Disable the FOLLOW icons in the footer
<div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
      
        
      
        
      
        
      
        
      
        
      
    

    <li><a href="/mllpa/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>

  </ul>
</div>
-->

<div class="page__footer-copyright">&copy; 2020 ML-LPA. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/mllpa/assets/js/main.min.js"></script>










  </body>
</html>
